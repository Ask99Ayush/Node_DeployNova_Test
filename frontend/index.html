<!DOCTYPE html>
<html>
<head>
  <title>Employee Management</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h2>Employee Management System</h2>

  <div>
    <input id="name" placeholder="Name">
    <input id="role" placeholder="Role">
    <button onclick="addEmployee()">Add</button>
  </div>

  <h3>Employee List</h3>
  <div id="list"></div>

<script>
const API = "http://13.127.82.32:5000/api/employees"; //EC2 IP PASTE

async function load() {
  const data = await fetch(API).then(r => r.json());

document.getElementById("list").innerHTML = data.map(emp => `
  <div class="emp-row">
    <span class="emp-text">${emp.name} - ${emp.role}</span>
    <div>
      <button class="action-btn" onclick="update('${emp._id}')">Update</button>
      <button class="delete-btn" onclick="del('${emp._id}')">Delete</button>
    </div>
  </div>
`).join("");

}

async function addEmployee() {
  await fetch(API, {
    method: "POST",
    headers: {"Content-Type": "application/json"},
    body: JSON.stringify({
      name: document.getElementById("name").value,
      role: document.getElementById("role").value
    })
  });
  load();
}

async function del(id) {
  await fetch(API + "/" + id, { method: "DELETE" });
  load();
}

async function update(id) {
  const name = prompt("Enter new name:");
  const role = prompt("Enter new role:");

  await fetch(API + "/" + id, {
    method: "PUT",
    headers: {"Content-Type": "application/json"},
    body: JSON.stringify({ name, role })
  });

  load();
}

load();
</script>
</body>
</html>
